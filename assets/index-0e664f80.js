(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function r(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(t){if(t.ep)return;t.ep=!0;const n=r(t);fetch(t.href,n)}})();function c(e,...s){return e.map((r,o)=>o!==e.length-1?r.concat(`<${s[o][1]} ${s[o][2]?`class="${s[o][2]}"`:""}>${s[o][0]}</${s[o][1]}>`):r).join("")}function m(e){return function(r,o){e.className="info hidden",e.innerHTML=r??"",r&&e.classList.remove("hidden"),o&&e.classList.add(o)}}function h(e,s=40){let r=e.length,o=Math.floor(s-3/2);return r>s?e.substring(0,o).concat("...").concat(e.substring(r-o,r)):e}let l=document.querySelector("#setWebhookUrl .webhookUrlInput"),k=document.querySelector("#setWebhookUrl .info"),a=m(k),f=new URLSearchParams(location.search).get("url");localStorage.getItem("webhook-url")&&/https:\/\/discord.com\/api\/webhooks(\/?)/g.test(localStorage.getItem("webhook-url"))?(l.value=localStorage.getItem("webhook-url"),a(c`Webhook URL set as: ${[h(l.value),"code"]}`,"success")):f&&/https:\/\/discord.com\/api\/webhooks(\/?)/g.test(f)&&(l.value=f,a(c`Webhook URL set as: ${[h(l.value),"code"]}`,"success"));l.addEventListener("input",()=>{l.value===""?(localStorage.removeItem("webhook-url"),a()):/https:\/\/discord.com\/api\/webhooks(\/?)/g.test(l.value)?(localStorage.setItem("webhook-url",l.value),a(c`Webhook URL set to: ${[h(l.value),"code"]}`,"success")):(localStorage.removeItem("webhook-url"),a(c`Malformed url ! Expecting discord webhook url (${["https://discord.com/api/webhooks/[webhook id]/[webhook token]","code"]})`,"error"))});let i=document.querySelector("#sendMessage .messageInput"),p=document.querySelector("#sendMessage .sendButton"),y=document.querySelector("#sendMessage .info"),u=m(y);function g(){return i.value!==""&&!!localStorage.getItem("webhook-url")}i.addEventListener("input",()=>{p.disabled=!g()});i.addEventListener("keypress",e=>{e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),g()&&b())});p.addEventListener("click",()=>{g()&&b()});let b=()=>{u("Sending..."),fetch(localStorage.getItem("webhook-url")??"",{method:"post",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({tts:!1,content:i.value})}).then(e=>{e.ok?(i.value="",u("Message Sent Successfully","success")):u(c`Failed to send message: ${[`Status ${e.status}`,"code"]}`,"error")}).catch(e=>{u(c`Failed to send message: ${[e,"code"]}`,"error")})};
